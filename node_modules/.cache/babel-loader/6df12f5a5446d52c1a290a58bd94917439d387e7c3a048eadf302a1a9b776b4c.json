{"ast":null,"code":"var _jsxFileName = \"/Users/marcos/Desktop/MJ-Blog-Application/src/App.js\",\n  _s2 = $RefreshSig$();\nimport Layout from './Layout';\nimport Home from './Home';\nimport NewPost from './NewPost';\nimport PostPage from './PostPage';\nimport Settings from './Settings';\nimport Missing from './Missing';\nimport SignIn from './SignIn';\nimport SignUp from './SignUp';\nimport MyPostDisplay from './MyPostDisplay';\nimport EditPost from './EditPost';\nimport { Route, Routes, useNavigate } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport { format } from 'date-fns';\nimport { auth, database } from './data/FireBase';\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\nimport { getDocs, addDoc, collection, query, where, updateDoc, deleteDoc } from 'firebase/firestore';\nimport { storage } from './data/FireBase';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\n//unique ids\nimport { v4 as uuidv4 } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [posts, setPosts] = useState([]);\n  const [search, setSearch] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [postTitle, setPostTitle] = useState('');\n  const [postBody, setPostBody] = useState('');\n  const [editTitle, setEditTitle] = useState('');\n  const [editBody, setEditBody] = useState('');\n  const navigate = useNavigate();\n  const [emailInput, setEmailInput] = useState('');\n  const [usernameInput, setUsernameInput] = useState('');\n  const [passwordInput, setPasswordInput] = useState('');\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [myPost, setMyPost] = useState([]);\n  const [user, setUser] = useState([]);\n  const [isSigningUp, setIsSigningUp] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedImage, setSelectedImage] = useState('');\n  const [userImg, setUserImg] = useState('/user.png');\n  _s(useEffect(_s(() => {\n    _s();\n    const storedIsLoggedIn = localStorage.getItem('isLoggedIn');\n    if (storedIsLoggedIn === 'true') {\n      setIsLoggedIn(true);\n      const storedUsername = localStorage.getItem('username');\n      setUsernameInput(storedUsername);\n      const StoredUserImg = localStorage.getItem('userimg');\n      if (StoredUserImg != null) {\n        setUserImg(StoredUserImg);\n      }\n    }\n    useEffect(() => {\n      const fetchPosts = async () => {\n        const postCollection = collection(database, 'posts');\n        const querySnapshot = await getDocs(postCollection);\n        if (!querySnapshot.empty) {\n          const fetchedPosts = [];\n\n          // Fetching user data based on username\n          const userSnapshot = await getDocs(query(collection(database, 'usernames'), where('username', '==', usernameInput)));\n          const userDocs = userSnapshot.docs;\n          const userDoc = userDocs.length > 0 ? userDocs[0] : null;\n          const userRef = userDoc ? userDoc.ref : null;\n          querySnapshot.forEach(doc => {\n            fetchedPosts.push(doc.data());\n            if (userRef) {\n              setUser(userRef); // Assuming setUser is a function that sets the user reference\n            }\n          });\n\n          setPosts(fetchedPosts);\n          console.log(fetchedPosts);\n          console.log(userRef);\n        }\n      };\n      fetchPosts();\n    }, []);\n\n    // Simulate a 2-second timeout before setting isLoading to false\n    const timeout = setTimeout(() => {\n      setIsLoading(false);\n    }, 2000);\n    return () => clearTimeout(timeout); // Cleanup the timeout on component unmount\n  }, \"OD7bBpZva5O2jO+Puf00hKivP7c=\"), []), \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n  // Save isLoggedIn and current username to local storage whenever they change\n\n  useEffect(() => {\n    localStorage.setItem('isLoggedIn', isLoggedIn.toString());\n    localStorage.setItem('username', usernameInput);\n  }, [isLoggedIn, usernameInput]);\n  useEffect(() => {\n    const filteredResults = posts.filter(post => post.body.toLowerCase().includes(search.toLowerCase()) || post.title.toLowerCase().includes(search.toLowerCase()));\n    const userFilteredResults = filteredResults.filter(post => post.username === usernameInput);\n    setSearchResults(filteredResults.reverse());\n    setMyPost(userFilteredResults);\n  }, [posts, search, usernameInput]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const id = uuidv4();\n    const datetime = format(new Date(), 'MMMM dd, yyyy pp');\n    const newPost = {\n      id,\n      username: usernameInput,\n      title: postTitle,\n      datetime,\n      body: postBody,\n      imageUrl: selectedImage\n    };\n    try {\n      const postCollection = collection(database, 'posts');\n      await addDoc(postCollection, newPost);\n\n      // Update state with the new post\n      setPosts(prevPosts => [...prevPosts, newPost]);\n      setPostTitle('');\n      setPostBody('');\n      navigate('/');\n    } catch (err) {\n      console.log(`Error ${err.message}`);\n    }\n  };\n  const handleProfileImgSubmit = async e => {\n    e.preventDefault();\n    try {\n      const querySnapshot = await getDocs(query(collection(database, 'usernames'), where('username', '==', usernameInput)));\n      if (!querySnapshot.empty) {\n        querySnapshot.forEach(async doc => {\n          const userRef = doc.ref;\n\n          // Update the 'profileImg' field in the user document\n          await updateDoc(userRef, {\n            profileImg: userImg\n          });\n          alert(\"user img changed\");\n        });\n      }\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n  const handleEdit = async id => {\n    const datetime = format(new Date(), 'MMMM dd, yyyy pp');\n    const updatedPost = {\n      id,\n      username: usernameInput,\n      // Use usernameInput instead of emailInput\n      title: editTitle,\n      datetime,\n      body: editBody\n    };\n    try {\n      const querySnapshot = await getDocs(query(collection(database, 'posts'), where('id', '==', id)));\n      if (!querySnapshot.empty) {\n        querySnapshot.forEach(async doc => {\n          await updateDoc(doc.ref, updatedPost); // Use doc.ref to get the document reference\n        });\n      }\n\n      setPosts(prevPosts => prevPosts.map(post => post.id === id ? updatedPost : post));\n      setEditTitle('');\n      setEditBody('');\n      navigate('/');\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n  };\n  const handleImageChange = async e => {\n    if (e.target.files.length) {\n      const imageFile = e.target.files[0];\n      try {\n        // Upload the image to Firebase Storage\n        const storageRef = ref(storage, `${usernameInput}/` + imageFile.name);\n        await uploadBytes(storageRef, imageFile);\n\n        // Get the download URL for the uploaded image\n        const downloadURL = await getDownloadURL(storageRef);\n        setSelectedImage(downloadURL); // Update the selectedImage state\n      } catch (error) {\n        console.error('Error uploading image:', error);\n      }\n    }\n  };\n  const handleUserImg = async e => {\n    if (e.target.files.length) {\n      const imageFile = e.target.files[0];\n      try {\n        // Upload the image to Firebase Storage\n        const storageRef = ref(storage, `${usernameInput}/` + imageFile.name);\n        await uploadBytes(storageRef, imageFile);\n\n        // Get the download URL for the uploaded image\n        const downloadURL = await getDownloadURL(storageRef);\n        setUserImg(downloadURL); // Update the selectedImage state\n        localStorage.setItem('userimg', downloadURL);\n      } catch (error) {\n        console.error('Error uploading image:', error);\n      }\n    }\n  };\n  const handleDelete = async postId => {\n    try {\n      const querySnapshot = await getDocs(query(collection(database, 'posts'), where('id', '==', postId)));\n      if (!querySnapshot.empty) {\n        querySnapshot.forEach(async doc => {\n          await deleteDoc(doc.ref); // Use doc.ref to get the document reference\n        });\n      }\n\n      // Update state by removing the deleted post\n      setPosts(prevPosts => prevPosts.filter(post => post.id !== postId));\n      navigate(\"/\");\n    } catch (err) {\n      console.log(`Error ${err.message}`);\n    }\n  };\n  const handleSignOut = e => {\n    e.preventDefault();\n    auth.signOut().then(() => {\n      setIsLoggedIn(false);\n      setEmailInput('');\n      setUsernameInput('');\n      setPasswordInput('');\n      alert(\"You were signed out.\");\n    });\n  };\n  const handleSignIn = async e => {\n    try {\n      await signInWithEmailAndPassword(auth, emailInput, passwordInput);\n\n      // Retrieve the username from Firestore using the email\n      const querySnapshot = await getDocs(query(collection(database, 'usernames'), where('userId', '==', auth.currentUser.uid)));\n      if (!querySnapshot.empty) {\n        querySnapshot.forEach(doc => {\n          const userData = doc.data();\n          console.log('User Data:', userData);\n          setUsernameInput(userData.username);\n          setUser({\n            userData\n          });\n        });\n      }\n      console.log(user);\n      setIsLoggedIn(true);\n      setPasswordInput('');\n      navigate(\"/\");\n    } catch (error) {\n      alert(\"Invalid username or password. Please try again.\");\n      console.log(error.message);\n    }\n  };\n  const handleSignUp = async e => {\n    try {\n      // Check if the username is already taken\n      const querySnapshot = await getDocs(query(collection(database, 'usernames'), where('username', '==', usernameInput)));\n      if (!querySnapshot.empty) {\n        alert(\"Username Taken\");\n      } else {\n        // Sign up the user using Firebase authentication\n        await createUserWithEmailAndPassword(auth, emailInput, passwordInput);\n\n        // Add user information to Firestore collection\n        const userCollection = collection(database, 'usernames'); // 'usernames' is the name of your collection\n        const newUser = {\n          userId: auth.currentUser.uid,\n          // Firebase UID of the user\n          username: usernameInput\n        };\n        await addDoc(userCollection, newUser);\n        setUser({\n          newUser\n        });\n        setIsSigningUp(false);\n        setIsLoggedIn(true);\n        alert(\"You were signed up.\");\n        navigate('/');\n      }\n    } catch (error) {\n      alert(\"Username taken or invalid input. Please try again.\");\n      console.log(error.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isLoggedIn && !isSigningUp && !isLoading && /*#__PURE__*/_jsxDEV(SignIn, {\n      handleSignIn: handleSignIn,\n      setEmailInput: setEmailInput,\n      emailInput: emailInput,\n      passwordInput: passwordInput,\n      setPasswordInput: setPasswordInput,\n      setIsSigningUp: setIsSigningUp\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 11\n    }, this), isSigningUp && /*#__PURE__*/_jsxDEV(SignUp, {\n      usernameInput: usernameInput,\n      setUsernameInput: setUsernameInput,\n      handleSignUp: handleSignUp,\n      setEmailInput: setEmailInput,\n      passwordInput: passwordInput,\n      setPasswordInput: setPasswordInput,\n      emailInput: emailInput,\n      setIsSigningUp: setIsSigningUp,\n      setIsLoggedIn: setIsLoggedIn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 11\n    }, this), isLoggedIn && !isSigningUp && /*#__PURE__*/_jsxDEV(Routes, {\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Layout, {\n          search: search,\n          setSearch: setSearch,\n          usernameInput: usernameInput,\n          userImg: userImg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 22\n        }, this),\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          index: true,\n          element: /*#__PURE__*/_jsxDEV(Home, {\n            posts: searchResults,\n            usernameInput: usernameInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"myPost\",\n          element: /*#__PURE__*/_jsxDEV(MyPostDisplay, {\n            posts: searchResults,\n            usernameInput: usernameInput,\n            myPost: myPost\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"post\",\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            index: true,\n            element: /*#__PURE__*/_jsxDEV(NewPost, {\n              handleImageChange: handleImageChange,\n              handleSubmit: handleSubmit,\n              postTitle: postTitle,\n              setPostTitle: setPostTitle,\n              postBody: postBody,\n              setPostBody: setPostBody,\n              setSelectedImage: setSelectedImage,\n              selectedImage: selectedImage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/post/edit/:id\",\n            element: /*#__PURE__*/_jsxDEV(EditPost, {\n              posts: posts,\n              handleEdit: handleEdit,\n              editTitle: editTitle,\n              setEditTitle: setEditTitle,\n              editBody: editBody,\n              setEditBody: setEditBody\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \":id\",\n            element: /*#__PURE__*/_jsxDEV(PostPage, {\n              usernameInput: usernameInput,\n              posts: posts,\n              handleDelete: handleDelete\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 26\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"settings\",\n          element: /*#__PURE__*/_jsxDEV(Settings, {\n            handleSignOut: handleSignOut,\n            handleUserImg: handleUserImg,\n            handleProfileImgSubmit: handleProfileImgSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 45\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          element: /*#__PURE__*/_jsxDEV(Missing, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 38\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s2(App, \"7/VwjpN1Jvfe4N6s9z2b/LcX8CA=\", false, function () {\n  return [useNavigate];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["Layout","Home","NewPost","PostPage","Settings","Missing","SignIn","SignUp","MyPostDisplay","EditPost","Route","Routes","useNavigate","useState","useEffect","format","auth","database","createUserWithEmailAndPassword","signInWithEmailAndPassword","getDocs","addDoc","collection","query","where","updateDoc","deleteDoc","storage","ref","uploadBytes","getDownloadURL","v4","uuidv4","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s2","_s","$RefreshSig$","posts","setPosts","search","setSearch","searchResults","setSearchResults","postTitle","setPostTitle","postBody","setPostBody","editTitle","setEditTitle","editBody","setEditBody","navigate","emailInput","setEmailInput","usernameInput","setUsernameInput","passwordInput","setPasswordInput","isLoggedIn","setIsLoggedIn","myPost","setMyPost","user","setUser","isSigningUp","setIsSigningUp","isLoading","setIsLoading","selectedImage","setSelectedImage","userImg","setUserImg","storedIsLoggedIn","localStorage","getItem","storedUsername","StoredUserImg","fetchPosts","postCollection","querySnapshot","empty","fetchedPosts","userSnapshot","userDocs","docs","userDoc","length","userRef","forEach","doc","push","data","console","log","timeout","setTimeout","clearTimeout","setItem","toString","filteredResults","filter","post","body","toLowerCase","includes","title","userFilteredResults","username","reverse","handleSubmit","e","preventDefault","id","datetime","Date","newPost","imageUrl","prevPosts","err","message","handleProfileImgSubmit","profileImg","alert","error","handleEdit","updatedPost","map","handleImageChange","target","files","imageFile","storageRef","name","downloadURL","handleUserImg","handleDelete","postId","handleSignOut","signOut","then","handleSignIn","currentUser","uid","userData","handleSignUp","userCollection","newUser","userId","children","fileName","_jsxFileName","lineNumber","columnNumber","path","element","index","_c","$RefreshReg$"],"sources":["/Users/marcos/Desktop/MJ-Blog-Application/src/App.js"],"sourcesContent":["import Layout from './Layout';\nimport Home from './Home';\nimport NewPost from './NewPost';\nimport PostPage from './PostPage';\nimport Settings from './Settings';\nimport Missing from './Missing';\nimport SignIn from './SignIn';\nimport SignUp from './SignUp';\nimport MyPostDisplay from './MyPostDisplay';\nimport EditPost from './EditPost';\nimport { Route, Routes, useNavigate } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport { format } from 'date-fns';\nimport { auth, database } from './data/FireBase';\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\nimport { getDocs, addDoc, collection, query, where, updateDoc, deleteDoc} from 'firebase/firestore';\nimport { storage } from './data/FireBase';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\n//unique ids\nimport { v4 as uuidv4 } from 'uuid';\n\n\nfunction App() {\n  const [posts, setPosts] = useState([]);\n  const [search, setSearch] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [postTitle, setPostTitle] = useState('');\n  const [postBody, setPostBody] = useState('');\n  const [editTitle, setEditTitle] = useState('');\n  const [editBody, setEditBody] = useState('');\n  const navigate = useNavigate();\n  const [emailInput, setEmailInput] = useState('');\n  const [usernameInput, setUsernameInput] = useState('');\n  const [passwordInput, setPasswordInput] = useState('');\n  const [isLoggedIn , setIsLoggedIn] = useState(false)\n  const [myPost, setMyPost] = useState([]);\n  const [user, setUser] = useState([]);\n  const [isSigningUp, setIsSigningUp] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedImage, setSelectedImage] = useState('');\n  const [userImg, setUserImg] = useState('/user.png');\n  \n\n  \n\n\n  \n  \n  useEffect(()  => {\n    \n    const storedIsLoggedIn = localStorage.getItem('isLoggedIn');\n    if (storedIsLoggedIn === 'true') {\n      setIsLoggedIn(true);\n      const storedUsername = localStorage.getItem('username');\n      setUsernameInput(storedUsername);\n      const StoredUserImg = localStorage.getItem('userimg');\n      if (StoredUserImg != null) {\n        setUserImg(StoredUserImg);\n      }\n      \n  }\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const postCollection = collection(database, 'posts');\n      const querySnapshot = await getDocs(postCollection);\n\n      if (!querySnapshot.empty) {\n        const fetchedPosts = [];\n        \n        // Fetching user data based on username\n        const userSnapshot = await getDocs(query(collection(database, 'usernames'), where('username', '==', usernameInput)));\n        const userDocs = userSnapshot.docs;\n        const userDoc = userDocs.length > 0 ? userDocs[0] : null;\n        const userRef = userDoc ? userDoc.ref : null;\n\n        querySnapshot.forEach((doc) => {\n          fetchedPosts.push(doc.data());\n          if (userRef) {\n            setUser(userRef); // Assuming setUser is a function that sets the user reference\n          }\n        });\n\n        setPosts(fetchedPosts);\n        console.log(fetchedPosts);\n        console.log(userRef)\n      }\n    };\n\n    fetchPosts();\n  }, []);\n \n\n\n\n    \n\n    // Simulate a 2-second timeout before setting isLoading to false\n    const timeout = setTimeout(() => {\n      setIsLoading(false);\n    }, 2000);\n    return () => clearTimeout(timeout); // Cleanup the timeout on component unmount\n  }, []);\n  \n  \n  // Save isLoggedIn and current username to local storage whenever they change\n  \n  \n  useEffect(() => {\n    localStorage.setItem('isLoggedIn', isLoggedIn.toString());\n    localStorage.setItem('username', usernameInput);\n  }, [isLoggedIn, usernameInput]);\n\n  \n  useEffect(() => {\n    const filteredResults = posts.filter((post) =>\n      ((post.body).toLowerCase()).includes(search.toLowerCase())\n      || ((post.title).toLowerCase()).includes(search.toLowerCase()));\n\n      const userFilteredResults = filteredResults.filter(\n        (post) => post.username === usernameInput\n      );\n\n    setSearchResults(filteredResults.reverse());\n    setMyPost(userFilteredResults);\n  }, [posts, search, usernameInput])\n\n  const handleSubmit = async(e) => {\n    e.preventDefault();\n    \n    const id = uuidv4();\n    const datetime = format(new Date(), 'MMMM dd, yyyy pp');\n    const newPost = { id, username: usernameInput, title: postTitle, datetime, body: postBody, imageUrl: selectedImage  };\n    try {\n      const postCollection = collection(database, 'posts');\n      await addDoc(postCollection, newPost);\n  \n      // Update state with the new post\n    setPosts((prevPosts) => [...prevPosts, newPost]);\n    setPostTitle('');\n    setPostBody('');\n    navigate('/');  \n    \n    \n    } catch (err) {\n      console.log(`Error ${err.message}`);\n    }\n\n  }\n\n  const handleProfileImgSubmit = async (e) => {\n    e.preventDefault();\n  \n    try {\n      const querySnapshot = await getDocs(query(collection(database, 'usernames'), where('username', '==', usernameInput)));\n      if (!querySnapshot.empty) {\n        querySnapshot.forEach(async (doc) => {\n          const userRef = doc.ref;\n          \n          // Update the 'profileImg' field in the user document\n          await updateDoc(userRef, { profileImg: userImg });\n          alert(\"user img changed\");\n        });\n      }\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n\n\n  const handleEdit = async (id) => {\n    const datetime = format(new Date(), 'MMMM dd, yyyy pp');\n    const updatedPost = {\n      id,\n      username: usernameInput, // Use usernameInput instead of emailInput\n      title: editTitle,\n      datetime,\n      body: editBody,\n    };\n  \n    try {\n      const querySnapshot = await getDocs(query(collection(database, 'posts'), where('id', '==', id)));\n      \n      if (!querySnapshot.empty) {\n        querySnapshot.forEach(async (doc) => {\n          await updateDoc(doc.ref, updatedPost); // Use doc.ref to get the document reference\n        });\n      }\n  \n      setPosts((prevPosts) =>\n        prevPosts.map((post) => (post.id === id ? updatedPost : post))\n      );\n      setEditTitle('');\n      setEditBody('');\n      navigate('/');\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n  };\n  const handleImageChange = async (e) => {\n    \n    if (e.target.files.length) {\n      const imageFile = e.target.files[0];\n  \n      try {\n        // Upload the image to Firebase Storage\n        const storageRef = ref(storage, `${usernameInput}/` + imageFile.name);\n        await uploadBytes(storageRef, imageFile);\n  \n        // Get the download URL for the uploaded image\n        const downloadURL = await getDownloadURL(storageRef);\n  \n        setSelectedImage(downloadURL); // Update the selectedImage state\n      } catch (error) {\n        console.error('Error uploading image:', error);\n      }\n    }\n  };\n  const handleUserImg = async (e) => {\n    \n    if (e.target.files.length) {\n      const imageFile = e.target.files[0];\n  \n      try {\n        // Upload the image to Firebase Storage\n        const storageRef = ref(storage, `${usernameInput}/` + imageFile.name);\n        await uploadBytes(storageRef, imageFile);\n  \n        // Get the download URL for the uploaded image\n        const downloadURL = await getDownloadURL(storageRef);\n  \n        setUserImg(downloadURL); // Update the selectedImage state\n        localStorage.setItem('userimg', downloadURL);\n      } catch (error) {\n        console.error('Error uploading image:', error);\n      }\n    }\n  };\n  \n  const handleDelete = async (postId) => {\n    try {\n      const querySnapshot = await getDocs(query(collection(database, 'posts'), where('id', '==', postId)));\n      \n      if (!querySnapshot.empty) {\n        querySnapshot.forEach(async (doc) => {\n          await deleteDoc(doc.ref); // Use doc.ref to get the document reference\n        });\n      }\n      \n      // Update state by removing the deleted post\n      setPosts((prevPosts) => prevPosts.filter(post => post.id !== postId));\n      navigate(\"/\");\n    } catch (err) {\n      console.log(`Error ${err.message}`);\n    }\n  };\n  \n  const handleSignOut = (e) => {\n    e.preventDefault();\n    auth.signOut().then(() => {\n      setIsLoggedIn(false);\n      setEmailInput('');\n      setUsernameInput('');\n      setPasswordInput('');\n      alert(\"You were signed out.\");\n    });\n  };\n   \n  const handleSignIn = async (e) => {\n    try {\n      await signInWithEmailAndPassword(auth, emailInput, passwordInput);\n  \n      // Retrieve the username from Firestore using the email\n      const querySnapshot = await getDocs(query(collection(database, 'usernames'), where('userId', '==',auth.currentUser.uid)));\n      if (!querySnapshot.empty) {\n        querySnapshot.forEach((doc) => {\n          const userData = doc.data();\n          console.log('User Data:', userData);\n          setUsernameInput(userData.username);\n          setUser({userData});\n        });\n      }\n      console.log(user);\n      setIsLoggedIn(true);\n      setPasswordInput('');\n     \n      navigate(\"/\");\n    } catch (error) {\n      alert(\"Invalid username or password. Please try again.\");\n      console.log(error.message);\n    }\n  };\n  \n  \n    \n  const handleSignUp = async (e) => {\n    try {\n      // Check if the username is already taken\n      const querySnapshot = await getDocs(query(collection(database, 'usernames'), where('username', '==', usernameInput)));\n      if (!querySnapshot.empty) {\n        alert(\"Username Taken\");\n      } else {\n        // Sign up the user using Firebase authentication\n        await createUserWithEmailAndPassword(auth, emailInput, passwordInput);\n  \n        // Add user information to Firestore collection\n        const userCollection = collection(database, 'usernames'); // 'usernames' is the name of your collection\n        const newUser = {\n          userId: auth.currentUser.uid, // Firebase UID of the user\n          username: usernameInput,\n        };\n        await addDoc(userCollection, newUser);\n        setUser({newUser});\n        setIsSigningUp(false);\n        setIsLoggedIn(true);\n        \n        alert(\"You were signed up.\");\n        navigate('/');\n      }\n    } catch (error) {\n      alert(\"Username taken or invalid input. Please try again.\");\n      console.log(error.message);\n    }\n  };\n  \n    \n    return (\n      <>\n       \n        {!isLoggedIn && !isSigningUp && !isLoading && (\n          <SignIn\n            handleSignIn={handleSignIn}\n            setEmailInput={setEmailInput}\n            emailInput = {emailInput}\n            passwordInput={passwordInput}\n            setPasswordInput={setPasswordInput}\n            setIsSigningUp={setIsSigningUp}\n           \n          />\n        )}\n      \n        {isSigningUp && (\n          <SignUp\n            usernameInput= {usernameInput}\n            setUsernameInput= { setUsernameInput}\n            handleSignUp={handleSignUp}\n            setEmailInput={setEmailInput}\n            passwordInput={passwordInput}\n            setPasswordInput={setPasswordInput}\n            emailInput={emailInput}\n            setIsSigningUp={setIsSigningUp}\n            setIsLoggedIn={setIsLoggedIn}\n          />\n        )}\n    \n    {isLoggedIn && !isSigningUp && (\n        <Routes>\n          <Route\n            path=\"/\"\n            element={<Layout search={search} setSearch={setSearch} usernameInput={usernameInput} userImg={userImg}/>}\n          >\n            <Route index element={<Home posts={searchResults} usernameInput={usernameInput} />} />\n            <Route path=\"myPost\" element={<MyPostDisplay posts={searchResults} usernameInput={usernameInput} myPost={myPost} />} />\n\n            <Route path=\"post\">\n              <Route\n                index\n                element={\n                  <NewPost\n                    handleImageChange= {handleImageChange}\n                    handleSubmit={handleSubmit}\n                    postTitle={postTitle}\n                    setPostTitle={setPostTitle}\n                    postBody={postBody}\n                    setPostBody={setPostBody}\n                    setSelectedImage={setSelectedImage}\n                    selectedImage={selectedImage}\n                  />\n                }\n              />\n              <Route\n                path=\"/post/edit/:id\"\n                element={(\n                  <EditPost\n                    posts={posts}\n                    handleEdit={handleEdit}\n                    editTitle={editTitle}\n                    setEditTitle={setEditTitle}\n                    editBody={editBody}\n                    setEditBody={setEditBody}\n                  />\n                )}\n              />\n              <Route\n                path=\":id\"\n                element={<PostPage usernameInput={usernameInput} posts={posts} handleDelete={handleDelete} />}\n              />\n            </Route>\n\n            <Route path=\"settings\" element={<Settings handleSignOut={handleSignOut} handleUserImg={handleUserImg} handleProfileImgSubmit={handleProfileImgSubmit}/>} />\n\n            <Route path=\"*\" element={<Missing />} />\n          </Route>\n        </Routes>\n      )}\n    </>\n  );\n}\n  \nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}